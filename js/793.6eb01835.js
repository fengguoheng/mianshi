"use strict";(self["webpackChunkavatarvue2"]=self["webpackChunkavatarvue2"]||[]).push([[793],{2793:function(s,e,t){t.r(e),t.d(e,{default:function(){return m}});var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"bg-gray-100 min-h-screen flex items-center justify-center p-4"},[e("div",{staticClass:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md"},[e("h2",{staticClass:"text-2xl font-bold text-center mb-6 text-gray-800"},[s._v("用户登录")]),e("form",{on:{submit:function(e){return e.preventDefault(),s.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium text-gray-700 mb-1"},[s._v("用户名")]),e("div",{staticClass:"relative"},[s._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"w-full pl-10 pr-4 py-2 rounded-lg border outline-none",class:{"border-primary focus:ring-primary":s.errors.username,"border-gray-300 focus:ring-gray-300":!s.errors.username},attrs:{type:"text",id:"username",name:"username",required:""},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}})]),s.errors.username?e("p",{staticClass:"text-red-500 text-sm mt-1"},[s._v(s._s(s.errors.username))]):s._e()]),e("div",{staticClass:"mb-6"},[e("label",{staticClass:"block text-sm font-medium text-gray-700 mb-1"},[s._v("密码")]),e("div",{staticClass:"relative"},[s._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"w-full pl-10 pr-4 py-2 rounded-lg border outline-none",class:{"border-primary focus:ring-primary":s.errors.password,"border-gray-300 focus:ring-gray-300":!s.errors.password},attrs:{type:"password",id:"password",name:"password",required:""},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value)}}})]),s.errors.password?e("p",{staticClass:"text-red-500 text-sm mt-1"},[s._v(s._s(s.errors.password))]):s._e()]),e("button",{staticClass:"w-full bg-primary text-white py-2 px-4 rounded-lg hover:bg-primary/90 transition-colors",attrs:{type:"submit",disabled:s.isLoading}},[s._v(" "+s._s(s.isLoading?"登录中...":"登录")+" ")]),e("div",{staticClass:"mt-4 text-sm text-center"},[e("span",{staticClass:"text-gray-600"},[s._v(" 没有账号？ "),e("router-link",{staticClass:"text-primary font-medium hover:text-primary/80 transition-colors",attrs:{to:"/register"}},[s._v(" 现在去注册 ")])],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:s.message,expression:"message"}],ref:"message",staticClass:"mt-4 p-3 rounded-lg",class:s.messageClass},[s._v(" "+s._s(s.message)+" ")])])])])},r=[function(){var s=this,e=s._self._c;return e("span",{staticClass:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[e("i",{staticClass:"fa fa-user"})])},function(){var s=this,e=s._self._c;return e("span",{staticClass:"absolute inset-y-0 left-0 flex items-center pl-3 text-gray-500"},[e("i",{staticClass:"fa fa-lock"})])}],i=(t(4114),t(8111),t(3579),{data(){return{username:"",password:"",message:"",messageClass:"",errors:{username:!1,password:!1},isLoading:!1}},mounted(){},methods:{async handleSubmit(){if(this.validateForm(),!Object.values(this.errors).some((s=>s))){this.isLoading=!0,this.message="";try{const s=await fetch("https://tender-secure-bluegill.ngrok-free.app/api/sqlLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}),e=await s.json();e.success?(this.messageClass="bg-green-100 text-green-800",this.message="登录成功！正在跳转...",localStorage.setItem("token",e.token),setTimeout((()=>{this.$router.push({name:"进行简历分析"})}),1e3)):(this.messageClass="bg-red-100 text-red-800",this.message=e.message||"登录失败")}catch(s){this.messageClass="bg-red-100 text-red-800",this.message="网络错误，请重试"}finally{this.isLoading=!1}}},validateForm(){this.errors.username=!this.username.trim(),this.errors.password=!this.password.trim()}}}),o=i,n=t(1656),l=(0,n.A)(o,a,r,!1,null,"22a1f1f8",null),m=l.exports}}]);
//# sourceMappingURL=793.6eb01835.js.map