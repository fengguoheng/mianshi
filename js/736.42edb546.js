"use strict";(self["webpackChunkavatarvue2"]=self["webpackChunkavatarvue2"]||[]).push([[736],{6591:function(t,s,e){var a=e(9064);a.t1.register(...a.$L),s.Ay=a.t1},7736:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav-container"},[s("div",{staticClass:"container"},[s("div",{staticClass:"button-group"}),s("div",{staticClass:"image-upload"},[s("label",{staticClass:"file-label",attrs:{for:"customFileInput"}},[t._v("请从本地上传您的简历")]),s("input",{ref:"imageInput",attrs:{id:"customFileInput",type:"file",accept:"image/*"},on:{change:t.previewImage}}),s("button",{attrs:{id:"submitBtn",disabled:t.isUploading},on:{click:t.handleUpload}},[t._v(" "+t._s(t.isUploading?"分析中...":"进行简历分析")+" ")])]),t.previewUrl?s("div",{staticClass:"image-preview"},[s("h3",{staticClass:"preview-title"},[t._v("简历图片预览")]),s("div",{staticClass:"preview-container"},[s("img",{staticClass:"preview-image",attrs:{src:t.previewUrl,alt:"上传的简历图片"}})])]):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showProgress,expression:"showProgress"}],staticClass:"progress"},[t._v(t._s(t.progressText))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"result"},[t._m(0),t._m(1),s("div",{staticClass:"feedback-container"},[s("h3",{staticClass:"feedback-title"},[t._v("关键问题与改进建议")]),s("div",{staticClass:"feedback-content",domProps:{innerHTML:t._s(t.feedbackHtml)}})]),s("div",{staticClass:"original-analysis",domProps:{innerHTML:t._s(t.answerHtml)}})])])])},i=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"result-header"},[s("h2",[t._v("面试者能力评估报告")]),s("p",{staticClass:"result-subtitle"},[t._v("基于简历分析生成的能力评测反馈")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"radar-chart-container"},[s("h3",{staticClass:"chart-title"},[t._v("能力雷达图")]),s("div",{staticClass:"chart-wrapper"},[s("canvas",{attrs:{id:"radarChart",width:"400",height:"300"}})])])}],r=(e(4114),e(8111),e(2489),e(7588),e(1701),e(6591)),l={data(){return{activeIndex:"interview",username:localStorage.getItem("username")||"用户",isUploading:!1,showProgress:!1,showResult:!1,progressText:"",answerContent:"",answerHtml:"",feedbackHtml:"",previewUrl:"",radarChart:null,skillData:{"专业知识水平":0,"技能匹配度":0,"语言表达能力":0,"逻辑思维能力":0,"创新能力与应变抗压能力":0}}},methods:{handleSelect(t){this.activeIndex=t,console.log("当前选中：",t),"home"===t||"exit"===t&&localStorage.removeItem("token")},previewImage(t){const s=t.target.files[0];if(s){if(!s.type.match("image.*"))return void alert("请选择图片文件");const t=new FileReader;t.onload=t=>{this.previewUrl=t.target.result},t.readAsDataURL(s)}},async handleUpload(){const t=this.$refs.imageInput.files[0];if(t){this.isUploading=!0,this.showProgress=!0,this.progressText="正在分析简历，请稍候...";try{const s=await this.convertFileToBase64(t),e=localStorage.getItem("career")||"人工智能技术岗",a=`请基于以下五个关键维度，对简历进行全面且深入的分析：\n\n1. 专业知识水平：评估面试者在${e}领域的理论知识储备、专业技能掌握程度及相关项目经验。\n2. 技能匹配度：分析面试者的技能与${e}岗位要求的契合度，包括硬技能（如编程语言、工具使用）和软技能（如团队协作、沟通能力）。\n3. 语言表达能力：通过简历中的文字表述，评估面试者的书面表达清晰度、逻辑性及专业术语使用的准确性。\n4. 逻辑思维能力：从简历内容的组织架构、项目描述的因果关系及问题解决思路，判断面试者的逻辑思维能力。\n5. 创新能力与应变抗压能力：通过分析简历中体现的创新性解决方案、应对挑战的经历及成果，评估面试者的创新思维和抗压能力。\n\n请为每个维度提供具体的分析结果，并给出综合评价和针对性的改进建议。分析结果需客观、专业且具有可操作性。面试者申请的岗位是${e}。`,i=await fetch("https://117.72.49.76:443/image-understanding",{method:"POST",headers:{"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"},body:JSON.stringify({image_base64:s,question:a})}),r=await i.json();"processing"===r.status&&await this.pollResult(r.request_id)}catch(s){console.error("上传失败:",s),this.progressText="网络错误："+s.message}finally{this.isUploading=!1,this.showProgress=!1}}else alert("请选择图片")},async pollResult(t){try{while(1){const s=await fetch(`https://117.72.49.76:443/get-result/${t}`),e=await s.json();if("completed"===e.status)return this.answerContent=e.content||"暂无结果",this.answerHtml=this.parseMarkdownToHtml(this.answerContent),this.showResult=!0,this.extractSkillScores(),this.createRadarChart(),this.generateFeedback(),localStorage.setItem("question",this.answerContent),void this.jumpToTest();if("failed"===e.status)return this.answerHtml="分析失败："+(e.error||"未知错误"),void(this.showResult=!0);await new Promise((t=>setTimeout(t,3e3))),this.progressText="分析中，请稍候..."}}catch(s){console.error("轮询失败:",s),this.answerHtml="网络错误："+s.message,this.showResult=!0}},convertFileToBase64(t){return new Promise(((s,e)=>{const a=new FileReader;a.onload=t=>s(t.target.result.split(",")[1]),a.onerror=t=>e(t),a.readAsDataURL(t)}))},parseMarkdownToHtml(t){if(!t)return"";let s=t.replace(/\*\*(.*?)\*\*/g,"<h3>$1</h3>").replace(/^\s*-\s+(.*)$/gm,"<li>$1</li>").replace(/(<li>.*?<\/li>)/gs,"<ul>$1</ul>").split("\n\n").map((t=>t.trim().startsWith("<h3>")||t.trim().startsWith("<ul>")?t:`<p>${t.trim()}</p>`)).join("");return`<div class="answer-content"><h2>面试者能力评估</h2>${s}</div>`},extractSkillScores(){try{for(const s in this.skillData)this.skillData[s]=0;const t=this.answerContent.toLowerCase();t.includes("专业知识水平")&&(this.skillData["专业知识水平"]=this.calculateScore(t,"专业知识水平")),t.includes("技能匹配度")&&(this.skillData["技能匹配度"]=this.calculateScore(t,"技能匹配度")),t.includes("语言表达能力")&&(this.skillData["语言表达能力"]=this.calculateScore(t,"语言表达能力")),t.includes("逻辑思维能力")&&(this.skillData["逻辑思维能力"]=this.calculateScore(t,"逻辑思维能力")),t.includes("创新能力与应变抗压能力")&&(this.skillData["创新能力与应变抗压能力"]=this.calculateScore(t,"创新能力与应变抗压能力")),console.log("提取的技能评分:",this.skillData)}catch(t){console.error("提取技能评分时出错:",t)}},calculateScore(t,s){if(t.includes(`${s}：优`)||t.includes(`${s}：优秀`))return 85;if(t.includes(`${s}：良`)||t.includes(`${s}：良好`))return 75;if(t.includes(`${s}：中`)||t.includes(`${s}：一般`))return 65;if(t.includes(`${s}：差`)||t.includes(`${s}：较差`))return 55;const e=t.split(s)[1]||"",a=["强","丰富","扎实","熟练","清晰","有条理","优秀","良好","出色","突出"],i=["不足","欠缺","薄弱","不够","有待提高","需要加强"];let r=50;return a.forEach((t=>{e.includes(t)&&(r+=5)})),i.forEach((t=>{e.includes(t)&&(r-=5)})),Math.max(0,Math.min(100,r))},createRadarChart(){try{const t=document.getElementById("radarChart").getContext("2d");this.radarChart&&this.radarChart.destroy();const s=Object.keys(this.skillData),e=Object.values(this.skillData);this.radarChart=new r.Ay(t,{type:"radar",data:{labels:s,datasets:[{label:"能力评分",data:e,backgroundColor:"rgba(59, 130, 246, 0.2)",borderColor:"rgba(59, 130, 246, 1)",pointBackgroundColor:"rgba(59, 130, 246, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(59, 130, 246, 1)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{r:{angleLines:{display:!0},suggestedMin:0,suggestedMax:100}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:function(t){return`${t.label}: ${t.raw}分`}}}}}})}catch(t){console.error("创建雷达图时出错:",t)}},generateFeedback(){try{const t=this.answerContent,s=/(\d+)\.\s*(.*?)\s*：([\s\S]*?)(?=\d+\.\s*|综合评价|$)/g,e=[];let a;while(null!==(a=s.exec(t)))e.push({title:a[2],analysis:a[3]});const i=/综合评价[\s\S]*?：([\s\S]*?)(?=面试建议|$)/,r=i.exec(t),l=r?r[1].trim():"",n=/面试建议[\s\S]*?：([\s\S]*?)(?=$)/,o=n.exec(t),c=o?o[1].trim():"",h=[],d=["不足","欠缺","需要改进","有待提高","薄弱","不够","缺乏"];e.forEach((t=>{d.forEach((s=>{const e=new RegExp(`(.*?${s}.*?)[。；]`,"g");let a;while(null!==(a=e.exec(t.analysis)))h.push({dimension:t.title,issue:a[1].trim()})}))}));let u='<div class="feedback-summary">';if(l&&(u+='<h4 class="summary-title">综合评价</h4>',u+=`<p class="summary-content">${l}</p>`),h.length>0&&(u+='<h4 class="issues-title">关键问题</h4>',u+='<ul class="issues-list">',h.forEach((t=>{u+=`<li><span class="issue-dimension">${t.dimension}：</span>${t.issue}</li>`})),u+="</ul>"),c)if(u+='<h4 class="suggestions-title">改进建议</h4>',c.includes("；")||c.includes("。")){const t=c.split(/[；。]/).filter((t=>""!==t.trim()));u+='<ul class="suggestions-list">',t.forEach((t=>{u+=`<li>${t.trim()}</li>`})),u+="</ul>"}else u+=`<p class="suggestions-content">${c}</p>`;u+="</div>",this.feedbackHtml=u,console.log("生成的反馈HTML:",this.feedbackHtml)}catch(t){console.error("生成反馈报告时出错:",t),this.feedbackHtml="<p>生成反馈报告时出错，请查看原始分析结果。</p>"}},jumpToTest(){}},beforeDestroy(){this.radarChart&&this.radarChart.destroy()}},n=l,o=e(1656),c=(0,o.A)(n,a,i,!1,null,"4f752e12",null),h=c.exports}}]);
//# sourceMappingURL=736.42edb546.js.map