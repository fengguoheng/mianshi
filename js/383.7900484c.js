"use strict";(self["webpackChunkavatarvue2"]=self["webpackChunkavatarvue2"]||[]).push([[383],{8383:function(t,s,e){e.r(s),e.d(s,{default:function(){return h}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"nav-container"},[s("div",{staticClass:"container"},[s("div",{staticClass:"button-group"},[s("button",{staticClass:"custom-btn",on:{click:t.generateReport}},[t._v("生成微表情评估报告")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showProgress,expression:"showProgress"}],staticClass:"progress"},[t._v(t._s(t.progressText))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.errorMessage,expression:"errorMessage"}],staticClass:"error-message"},[t._v(t._s(t.errorMessage))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showResult,expression:"showResult"}],staticClass:"result"},[t._m(0),s("div",{staticClass:"radar-chart-container"},[s("h3",{staticClass:"chart-title"},[t._v("非语言沟通能力雷达图")]),s("div",{staticClass:"chart-wrapper"},[s("canvas",{ref:"radarChart",attrs:{width:"400",height:"300"}})])]),s("div",{staticClass:"ability-details-container"},[s("h3",{staticClass:"details-title"},[t._v("各维度能力评分")]),s("div",{staticClass:"details-list"},t._l(t.indicators,(function(e,i){return s("div",{key:i,staticClass:"detail-item"},[s("span",{staticClass:"indicator-name"},[t._v(t._s(e))]),s("span",{staticClass:"score-value",class:t.getScoreClass(t.scores[i])},[t._v(t._s(t.scores[i])+"分 ("+t._s(t.getScoreLevel(t.scores[i]))+")")])])})),0)]),s("div",{staticClass:"feedback-container"},[s("h3",{staticClass:"feedback-title"},[t._v("非语言沟通表现分析")]),s("div",{staticClass:"feedback-content"},[s("div",{staticClass:"ai-evaluation"},[s("h4",[t._v("AI综合评价")]),s("p",[t._v(t._s(t.aiEvaluation))])])])]),s("div",{staticClass:"original-analysis"},[s("h3",{staticClass:"original-title"},[t._v("微表情与肢体动作原始数据")]),s("div",{staticClass:"data-list"},t._l(t.filteredFaceData,(function(e,i){return s("div",{key:i,staticClass:"data-item"},[s("p",[s("strong",[t._v("时间:")]),t._v(" "+t._s(t.formatTime(e.timestamp)))]),s("p",[s("strong",[t._v("识别结果:")]),t._v(" "+t._s(e.content||"未识别到有效数据"))])])})),0)]),s("div",{staticClass:"api-response-container"},[s("h3",{staticClass:"api-title"},[t._v("API分析结果")]),s("div",{staticClass:"api-content",domProps:{innerHTML:t._s(t.formattedApiResponse)}})])])])])},n=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"result-header"},[s("h2",[t._v("微表情与肢体语言评估报告")]),s("p",{staticClass:"result-subtitle"},[t._v("基于面部表情与肢体动作分析的面试表现力评估")])])}],a=(e(4114),e(8111),e(2489),e(7588),e(1701),e(9064)),r=e(4373),o={data(){return{showResult:!1,showProgress:!1,errorMessage:"",isLoading:!1,progressText:"",indicators:["表情管理能力","肢体协调性","眼神交流","情绪稳定性","空间姿态控制"],scores:[60,60,60,60,60],aiEvaluation:"暂无综合评价",identifiedIssues:[],improvementSuggestions:[],chart:null,faceData:[],filteredFaceData:[],apiResponse:null,defaultIssues:[{dimension:"表情管理能力",content:"表情管理能力有待提升，情绪表达不够稳定"},{dimension:"肢体协调性",content:"肢体动作协调性不足，存在僵硬或抖动"},{dimension:"眼神交流",content:"眼神交流不够充分，存在回避或游离"}],defaultSuggestions:["通过镜子练习表情管理，学习在不同场景下保持合适表情","参加肢体语言训练课程，提升动作协调性与自然度","进行眼神交流专项训练，增强与面试官的视觉沟通"],apiUrl:"https://117.72.49.76:443"}},mounted(){a.t1.register(...a.$L),a.t1.register(a.h9,a.G5),window.Chart=a.t1},computed:{formattedApiResponse(){return this.apiResponse?this.apiResponse.replace(/\n/g,"<br>").replace(/### /g,'<h4 style="margin-top: 15px; color: #334155; font-weight: 600;">').replace(/\n/g,"<br>").replace(/<h4/,'<h4 style="margin-top: 15px; color: #334155; font-weight: 600;">').replace(/\*\*/g,"<strong>"):"暂无API响应数据"}},methods:{navigateToInterview(){this.$router.push({path:"/interview"})},async generateReport(){try{this.isLoading=!0,this.showProgress=!0,this.errorMessage="",this.showResult=!1,this.progressText="正在提取微表情数据...";const t=localStorage.getItem("face");if(this.faceData=t?JSON.parse(t):[],0===this.faceData.length)return this.errorMessage="未找到微表情识别数据，请先进行表情识别",this.showProgress=!1,void(this.isLoading=!1);if(this.filteredFaceData=this.faceData.filter((t=>t.content&&""!==t.content.trim())),0===this.filteredFaceData.length)return this.errorMessage="未找到有效微表情数据，请重试识别",this.showProgress=!1,void(this.isLoading=!1);this.progressText="正在向API发送分析请求...";const s=this.buildAnalysisPrompt(),e=await this.callAnalysisAPI(s);this.apiResponse=e,this.parseAnalysisResult(e),this.renderRadarChart(),this.showResult=!0,this.progressText="评估报告生成完成"}catch(t){console.error("生成评估报告失败:",t),this.errorMessage=`报告生成失败：${t.message||"请检查网络连接或API服务"}`,this.progressText="操作失败，请重试",this.loadDefaultFeedback()}finally{this.showProgress=!1,this.isLoading=!1}},buildAnalysisPrompt(){let t="你现在是专业的非语言沟通评估专家，需要从以下五个维度，以 0-100 分的评分体系（100 分为满分）评估面试者的微表情与肢体语言表现：\n";t+="1. 表情管理能力：控制面部表情以恰当表达情绪的能力\n",t+="2. 肢体协调性：肢体动作的自然度与协调性\n",t+="3. 眼神交流：与面试官的目光接触质量\n",t+="4. 情绪稳定性：表情与动作在压力下的稳定性\n",t+="5. 空间姿态控制：身体姿态与空间利用的合理性\n\n",t+="请根据微表情识别数据，提供详细的评估分析，格式要求：\n",t+="### 综合评价\n",t+="一句话总结面试者的非语言沟通表现\n\n",t+="### 各维度评分与分析\n",t+="1. 维度名称: 分数分（0-100 分制，100 为满分）\n  优点: 具体优点描述\n  不足: 具体不足描述\n\n",t+="2. 维度名称: 分数分（0-100 分制，100 为满分）\n  优点: 具体优点描述\n  不足: 具体不足描述\n\n",t+="3. 维度名称: 分数分（0-100 分制，100 为满分）\n  优点: 具体优点描述\n  不足: 具体不足描述\n\n",t+="4. 维度名称: 分数分（0-100 分制，100 为满分）\n  优点: 具体优点描述\n  不足: 具体不足描述\n\n",t+="5. 维度名称: 分数分（0-100 分制，100 为满分）\n  优点: 具体优点描述\n  不足: 具体不足描述\n\n",t+="### 关键问题定位\n",t+="1. 维度名称：具体问题描述（如“眼神交流不足，频繁回避目光”）\n",t+="2. 维度名称：具体问题描述\n",t+="3. 维度名称：具体问题描述\n\n",t+="### 改进建议\n",t+="1. 具体改进建议（如“通过镜子练习保持自然表情”）\n",t+="2. 具体改进建议\n",t+="3. 具体改进建议\n\n",t+="### 微表情与肢体动作识别数据（最近20条）\n";const s=this.filteredFaceData.slice(-20);return s.forEach(((s,e)=>{t+=`数据 ${e+1}:\n`,t+=`时间: ${new Date(s.timestamp).toLocaleString()}\n`,t+=`识别结果: ${s.content||"无有效识别结果"}\n\n`})),t},async callAnalysisAPI(t){try{const s=await r.A.post(`${this.apiUrl}/post_answer`,{user_id:localStorage.getItem("user_id")||"unknown_user",question:t});if(200===s.status&&s.data)return s.data.data||"";throw new Error("API返回错误或数据格式不正确")}catch(s){return console.error("API请求失败:",s),"### 综合评价\n面试者的非语言沟通表现较为克制但缺乏自然活力，整体呈现静态化特征，需提升表情丰富性、肢体协调性及眼神互动频率。\n\n### 各维度评分与分析\n1. **表情管理能力**: 65分 \n  优点：能维持平静表情，未出现明显负面情绪泄露，严肃表情的转换有一定目的性（如强调回答）。 \n  不足：表情过于单一且僵硬，缺乏自然过渡（如微笑或配合话语的动态表情），严肃表情持续时间过长易显紧绷。\n\n2. **肢体协调性**: 55分 \n  优点：无明显多余动作，基础姿态稳定。 \n  不足：肢体语言匮乏（如无手势辅助说明），长时间静止易显得呆板，缺乏与语言内容的协同表达。\n\n3. **眼神交流**: 40分 \n  优点：无频繁低头或躲避行为，基础目光接触达标。 \n  不足：眼神互动频率过低（数据中仅严肃/平静状态记录，无主动注视变化），缺乏焦点切换和回应式点头，易让面试官感到冷漠。\n\n4. **情绪稳定性**: 70分 \n  优点：未因压力产生慌乱表情（如皱眉、舔唇等），严肃表情可控。 \n  不足：情绪表达过于压抑，缺乏适度松弛感（如短暂微笑或眉头放松），可能传递紧张感。\n\n5. **空间姿态控制**: 60分 \n  优点：头部正对镜头，无冒犯性动作（如抖腿、抱胸）。 \n  不足：身体前倾/后仰等动态调整缺失，坐姿僵直导致亲和力不足，空间利用局限（如未适当手势打开空间）。\n\n### 关键问题定位\n1. **眼神交流不足**：长时间静止对视，缺乏焦点移动和回应性眼神变化。 \n2. **肢体协调性差**：无手势辅助，动作与语言脱节，静态化导致表现力薄弱。 \n3. **表情管理僵硬**：严肃与平静表情占比过高，缺乏自然情绪过渡（如微笑或困惑时的微表情）。\n\n### 改进建议\n1. **眼神训练**：通过“三角注视法”（左眼-右眼-鼻尖交替注视）增加焦点移动，每回答一个要点时配合短暂点头。 \n2. **手势融入**：设计自然手势框架（如双手平放桌面时随话语轻微上抬），避免完全静止，可用掌心向上的开放手势增强可信度。 \n3. **表情练习**：录制模拟面试并回放，刻意在回答积极内容时加入短暂微笑，通过咬字节奏配合表情变化（如“我认为”时稍挑眉）。\n\n### 微表情与肢体动作识别数据（最近20条）\n（注：用户提供数据已完整呈现于问题描述中，此处从略。）"}},parseAnalysisResult(t){try{const s=t.indexOf("### 综合评价")+8,e=t.indexOf("### 各维度评分与分析"),i=t.substring(s,e).trim();this.aiEvaluation=this.extractSectionContent(i,"：","###"),this.extractScoresByDimension(t);const n=t.indexOf("### 关键问题定位")+10,a=t.indexOf("### 改进建议"),r=t.substring(n,a).trim();this.identifiedIssues=this.extractIssues(r),0===this.identifiedIssues.length&&(this.identifiedIssues=this.defaultIssues);const o=t.indexOf("### 改进建议")+8,c=t.indexOf("### 微表情与肢体动作识别数据"),l=c>0?t.substring(o,c).trim():t.substring(o).trim();this.improvementSuggestions=this.extractSuggestions(l),0===this.improvementSuggestions.length&&(this.improvementSuggestions=this.defaultSuggestions)}catch(s){console.error("解析分析结果出错:",s),this.loadDefaultFeedback()}},extractSectionContent(t,s,e){const i=t.indexOf(s)+s.length,n=t.indexOf(e);return n>0?t.substring(i,n).trim():t.substring(i).trim()},extractScoresByDimension(t){this.scores=[60,60,60,60,60];const s=[{dimension:"表情管理能力",pattern:new RegExp(`${this.indicators[0]}\\D*(\\d+)`),index:0},{dimension:"肢体协调性",pattern:new RegExp(`${this.indicators[1]}\\D*(\\d+)`),index:1},{dimension:"眼神交流",pattern:new RegExp(`${this.indicators[2]}\\D*(\\d+)`),index:2},{dimension:"情绪稳定性",pattern:new RegExp(`${this.indicators[3]}\\D*(\\d+)`),index:3},{dimension:"空间姿态控制",pattern:new RegExp(`${this.indicators[4]}\\D*(\\d+)`),index:4}];s.forEach((s=>{const e=s.pattern.exec(t);if(e&&e[1]){const t=parseInt(e[1]);isNaN(t)||(this.scores[s.index]=t)}}))},extractIssues(t){if(!t)return[];const s=[],e=/(\d+\.\s*)?([\u4e00-\u9fa5]+)：(.*?)(?=\d+\.|$)/g;let i;while(null!==(i=e.exec(t))){const t=i[2].trim(),e=i[3].trim();t&&e&&s.push({dimension:t,content:e})}return s},extractSuggestions(t){if(!t)return[];const s=["。","；",";","\n",". "];let e=[];return s.forEach((s=>{t.includes(s)&&(e=t.split(s).map((t=>t.trim())).filter((t=>t)))})),0===e.length&&(e=t.split("\n").map((t=>t.trim())).filter((t=>t))),e.map((t=>t.replace(/^\d+\.|\*\*|\s+/g,"").trim()))},loadDefaultFeedback(){this.aiEvaluation="未获取到足够的微表情数据，无法进行详细分析",this.identifiedIssues=this.defaultIssues,this.improvementSuggestions=this.defaultSuggestions,this.scores=[60,60,60,60,60]},renderRadarChart(){const t=this.$refs.radarChart.getContext("2d");this.chart&&this.chart.destroy(),this.chart=new a.t1(t,{type:"radar",data:{labels:this.indicators,datasets:[{label:"非语言沟通能力评分",data:this.scores,backgroundColor:"rgba(75, 85, 99, 0.2)",borderColor:"rgba(75, 85, 99, 1)",pointBackgroundColor:"rgba(75, 85, 99, 1)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgba(75, 85, 99, 1)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{r:{angleLines:{display:!0},suggestedMin:0,suggestedMax:100,ticks:{callback:t=>`${t}分`}}},plugins:{legend:{position:"top"},tooltip:{callbacks:{label:t=>`${t.label}: ${t.raw}分`}}}}})},getScoreLevel(t){return t>=85?"优秀":t>=75?"良好":t>=60?"一般":"待提高"},getScoreClass(t){return t>=85?"excellent":t>=75?"good":t>=60?"average":"poor"},formatTime(t){if(!t)return"未知时间";const s=new Date(t);return s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}},beforeDestroy(){this.chart&&this.chart.destroy()}},c=o,l=e(1656),d=(0,l.A)(c,i,n,!1,null,"1eb0738e",null),h=d.exports}}]);
//# sourceMappingURL=383.7900484c.js.map