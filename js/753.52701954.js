"use strict";(self["webpackChunkavatarvue2"]=self["webpackChunkavatarvue2"]||[]).push([[753],{6753:function(s,e,t){t.r(e),t.d(e,{default:function(){return m}});var a=function(){var s=this,e=s._self._c;return e("div",{staticClass:"login-page"},[s._m(0),e("div",{staticClass:"login-container"},[e("h2",{staticClass:"login-title"},[s._v("用户登录")]),e("form",{on:{submit:function(e){return e.preventDefault(),s.handleSubmit.apply(null,arguments)}}},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[s._v("用户名")]),e("div",{staticClass:"input-wrapper"},[e("i",{staticClass:"fa fa-user input-icon"}),e("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-input",class:{"error-input":s.errors.username},attrs:{type:"text",id:"username",name:"username",required:""},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}})]),s.errors.username?e("p",{staticClass:"error-message"},[s._v(" "+s._s(s.errors.username)+" ")]):s._e()]),e("div",{staticClass:"form-group"},[e("label",{staticClass:"form-label"},[s._v("密码")]),e("div",{staticClass:"input-wrapper"},[e("i",{staticClass:"fa fa-lock input-icon"}),e("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-input",class:{"error-input":s.errors.password},attrs:{type:"password",id:"password",name:"password",required:""},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value)}}})]),s.errors.password?e("p",{staticClass:"error-message"},[s._v(" "+s._s(s.errors.password)+" ")]):s._e()]),e("button",{staticClass:"login-btn",attrs:{type:"submit",disabled:s.isLoading}},[s._v(" "+s._s(s.isLoading?"登录中...":"登录")+" ")]),e("div",{staticClass:"register-link"},[e("span",{staticClass:"text-gray-600"},[s._v("没有账号？")]),e("router-link",{staticClass:"link-primary",attrs:{to:"/register"}},[s._v(" 现在去注册 ")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:s.message,expression:"message"}],ref:"message",staticClass:"message-box",class:{success:s.messageClass.includes("green"),error:s.messageClass.includes("red")}},[s._v(" "+s._s(s.message)+" ")])])])])},r=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"bg-container"},[e("div",{staticClass:"star-background",attrs:{id:"stars"}})])}],i=(t(4114),t(8111),t(3579),{data(){return{username:"",password:"",message:"",messageClass:"",errors:{username:!1,password:!1},isLoading:!1,starContainer:null}},mounted(){this.initStarAnimation()},beforeDestroy(){this.starContainer&&(this.starContainer.innerHTML="")},methods:{async handleSubmit(){if(this.validateForm(),!Object.values(this.errors).some((s=>s))){this.isLoading=!0,this.message="";try{const s=await fetch("https://tender-secure-bluegill.ngrok-free.app/api/sqlLogin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}),e=await s.json();e.success?(this.messageClass="bg-green-100 text-green-800",this.message="登录成功！正在跳转...",localStorage.setItem("token",e.token),setTimeout((()=>{localStorage.setItem("username",this.username),this.$router.push({name:"进行简历分析"})}),1e3)):(this.messageClass="bg-red-100 text-red-800",this.message=e.message||"登录失败")}catch(s){this.messageClass="bg-red-100 text-red-800",this.message="网络错误，请重试"}finally{this.isLoading=!1}}},validateForm(){this.errors.username=!this.username.trim(),this.errors.password=!this.password.trim()},initStarAnimation(){if(this.starContainer=document.getElementById("stars"),!this.starContainer)return;for(let e=0;e<20;e++){const s=document.createElement("div");s.className="star",s.style.top=this.randomDistance(500,-100)+"px",s.style.left=this.randomDistance(1300,300)+"px",this.starContainer.appendChild(s)}const s=document.getElementsByClassName("star");for(let e=0,t=s.length;e<t;e++)s[e].style.animationDelay=(9*Math.random()).toFixed(1)+"s"},randomDistance(s,e){return Math.floor(Math.random()*(s-e+1)+e)}}}),n=i,o=t(1656),l=(0,o.A)(n,a,r,!1,null,"8b46a844",null),m=l.exports}}]);
//# sourceMappingURL=753.52701954.js.map