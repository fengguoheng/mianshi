"use strict";(self["webpackChunkavatarvue2"]=self["webpackChunkavatarvue2"]||[]).push([[253],{6253:function(s,t,a){a.r(t),a.d(t,{default:function(){return m}});var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"register-page"},[s._m(0),t("div",{staticClass:"register-container"},[t("h2",{staticClass:"register-title"},[s._v("创建新账号")]),t("form",{on:{submit:function(t){return t.preventDefault(),s.handleSubmit.apply(null,arguments)}}},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[s._v("用户名")]),t("div",{staticClass:"input-wrapper"},[t("i",{staticClass:"fa fa-user input-icon"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.username,expression:"formData.username"}],staticClass:"form-input",class:{"error-input":s.errors.username},attrs:{type:"text",id:"username",required:"",minlength:"3",maxlength:"20"},domProps:{value:s.formData.username},on:{input:function(t){t.target.composing||s.$set(s.formData,"username",t.target.value)}}})]),s.errors.username?t("p",{staticClass:"error-message"},[s._v(" "+s._s(s.errors.username)+" ")]):s._e()]),t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[s._v("邮箱")]),t("div",{staticClass:"input-wrapper"},[t("i",{staticClass:"fa fa-envelope input-icon"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.email,expression:"formData.email"}],staticClass:"form-input",class:{"error-input":s.errors.email},attrs:{type:"email",id:"email",required:""},domProps:{value:s.formData.email},on:{input:function(t){t.target.composing||s.$set(s.formData,"email",t.target.value)}}})]),s.errors.email?t("p",{staticClass:"error-message"},[s._v(" "+s._s(s.errors.email)+" ")]):s._e()]),t("div",{staticClass:"form-group"},[t("label",{staticClass:"form-label"},[s._v("密码")]),t("div",{staticClass:"input-wrapper"},[t("i",{staticClass:"fa fa-lock input-icon"}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.formData.password,expression:"formData.password"}],staticClass:"form-input",class:{"error-input":s.errors.password},attrs:{type:"password",id:"password",required:"",minlength:"6",maxlength:"32"},domProps:{value:s.formData.password},on:{input:function(t){t.target.composing||s.$set(s.formData,"password",t.target.value)}}})]),s.errors.password?t("p",{staticClass:"error-message"},[s._v(" "+s._s(s.errors.password)+" ")]):s._e()]),t("button",{staticClass:"register-btn",attrs:{type:"submit",disabled:s.isSubmitting}},[s.isSubmitting?t("span",{staticClass:"animate-spin"},[t("i",{staticClass:"fa fa-circle-o-notch"})]):t("span",[s._v("注册")])]),t("div",{staticClass:"login-link"},[t("span",{staticClass:"text-gray-600"},[s._v("已有账号？")]),t("router-link",{staticClass:"link-primary",attrs:{to:"/"}},[s._v(" 立即登录 ")])],1),s.message.text?t("div",{staticClass:"message-box",class:{success:"success"===s.message.type,error:"error"===s.message.type}},[s._v(" "+s._s(s.message.text)+" ")]):s._e()])])])},r=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"bg-container"},[t("div",{staticClass:"star-background",attrs:{id:"stars"}})])}],i=(a(4114),{name:"RegisterForm",data(){return{formData:{username:"",email:"",password:""},errors:{username:"",email:"",password:""},message:{type:"",text:""},isSubmitting:!1,emailRegex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,starContainer:null}},mounted(){this.initStarAnimation()},beforeDestroy(){this.starContainer&&(this.starContainer.innerHTML="")},methods:{validateForm(){this.clearErrors();let s=!0;return(!this.formData.username||this.formData.username.length<3||this.formData.username.length>20)&&(this.errors.username="用户名需3-20个字符",s=!1),this.emailRegex.test(this.formData.email)||(this.errors.email="请输入有效的邮箱地址",s=!1),(!this.formData.password||this.formData.password.length<6||this.formData.password.length>32)&&(this.errors.password="密码需6-32个字符",s=!1),s},clearErrors(){this.errors={username:"",email:"",password:""}},showMessage(s,t){this.message={type:s,text:t},"success"===s&&setTimeout((()=>{this.$router.push("/")}),1500)},async handleSubmit(){if(this.validateForm()){this.isSubmitting=!0;try{const s=await fetch("https://tender-secure-bluegill.ngrok-free.app/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.formData)}),t=await s.json();t.success?this.showMessage("success","注册成功！请前往登录"):this.showMessage("error",t.message||"注册失败，请检查信息")}catch(s){this.showMessage("error","网络错误，请稍后重试"),console.error("注册请求失败:",s)}finally{this.isSubmitting=!1}}},initStarAnimation(){if(this.starContainer=document.getElementById("stars"),!this.starContainer)return;for(let t=0;t<20;t++){const s=document.createElement("div");s.className="star",s.style.top=this.randomDistance(500,-100)+"px",s.style.left=this.randomDistance(1300,300)+"px",this.starContainer.appendChild(s)}const s=document.getElementsByClassName("star");for(let t=0,a=s.length;t<a;t++)s[t].style.animationDelay=(9*Math.random()).toFixed(1)+"s"},randomDistance(s,t){return Math.floor(Math.random()*(s-t+1)+t)}}}),o=i,n=a(1656),l=(0,n.A)(o,e,r,!1,null,"17b18624",null),m=l.exports}}]);
//# sourceMappingURL=253.fc9ec18f.js.map